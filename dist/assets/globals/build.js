let q=0;class p{constructor(e){this.wrapped=e}static unwrap(e){return e instanceof p?e.wrapped:e}static wrap(e){const n=S[q++%5];return n.wrapped=e,n}}const S=[new p(null),new p(null),new p(null),new p(null),new p(null)],l={};class c{constructor(){this._observers={}}get(e){return this[e]}set(e,n){const t=this[e];if(this[e]===n)return;const o=p.unwrap(n);this[e]=o,this.notifyPropertyChange(e,o,t)}setProperty(e,n){const t=this[e];if(this[e]===n)return;this[e]=n,this.notifyPropertyChange(e,n,t);const o=e+"Change";if(this.hasListeners(o)){const r=this._createPropertyChangeData(e,n,t);r.eventName=o,this.notify(r)}}on(e,n,t){this.addEventListener(e,n,t)}once(e,n,t){this.addEventListener(e,n,t,!0)}off(e,n,t){this.removeEventListener(e,n,t)}addEventListener(e,n,t,o){if(o=o||void 0,t=t||void 0,typeof e!="string")throw new TypeError("Event name must be a string.");if(typeof n!="function")throw new TypeError("Callback, if provided, must be a function.");const r=this._getEventList(e,!0);c._indexOfListener(r,n,t)===-1&&r.push({callback:n,thisArg:t,once:o})}removeEventListener(e,n,t){if(t=t||void 0,typeof e!="string")throw new TypeError("Events name(s) must be string.");if(n&&typeof n!="function")throw new TypeError("callback must be function.");const o=this._observers[e];o&&(c.innerRemoveEventListener(o,n,t),o.length||delete this._observers[e])}static on(e,n,t,o){this.addEventListener(e,n,t,o)}static once(e,n,t){this.addEventListener(e,n,t,!0)}static off(e,n,t){this.removeEventListener(e,n,t)}static innerRemoveEventListener(e,n,t){for(let o=0;o<e.length;o++){const r=e[o];t&&(r.callback!==n||r.thisArg!==t)||n&&r.callback!==n||(e.splice(o,1),o--)}}static removeEventListener(e,n,t){var u;if(t=t||void 0,typeof e!="string")throw new TypeError("Event name must be a string.");if(n&&typeof n!="function")throw new TypeError("Callback, if provided, must be function.");const o=this.name==="Observable"?"*":this.name,r=(u=l==null?void 0:l[o])==null?void 0:u[e];if(!r)return;c.innerRemoveEventListener(r,n,t),r.length||delete l[o][e],Object.keys(l[o]).length===0&&delete l[o]}static addEventListener(e,n,t,o){if(o=o||void 0,t=t||void 0,typeof e!="string")throw new TypeError("Event name must be a string.");if(typeof n!="function")throw new TypeError("Callback must be a function.");const r=this.name==="Observable"?"*":this.name;l[r]||(l[r]={}),l[r][e]||(l[r][e]=[]),c._indexOfListener(l[r][e],n,t)===-1&&l[r][e].push({callback:n,thisArg:t,once:o})}_globalNotify(e,n,t){if(l[e]){const o=t.eventName+n,r=l[e][o];r&&c._handleEvent(r,t)}if(l["*"]){const o=t.eventName+n,r=l["*"][o];r&&c._handleEvent(r,t)}}notify(e){e.object=e.object||this;const n=e,t=this.constructor.name;this._globalNotify(t,"First",n);const o=this._observers[e.eventName];o&&c._handleEvent(o,n),this._globalNotify(t,"",n)}static _handleEvent(e,n){if(e.length)for(let t=e.length-1;t>=0;t--){const o=e[t];if(!o)continue;o.once&&e.splice(t,1);const r=o.thisArg?o.callback.apply(o.thisArg,[n]):o.callback(n);r instanceof Promise&&r.catch(s=>{console.error(s)})}}notifyPropertyChange(e,n,t){this.notify(this._createPropertyChangeData(e,n,t))}hasListeners(e){return e in this._observers}_createPropertyChangeData(e,n,t){return{eventName:c.propertyChangeEvent,object:this,propertyName:e,value:n,oldValue:t}}_emit(e){this.notify({eventName:e,object:this})}_getEventList(e,n){if(!e)throw new TypeError("eventName must be a valid string.");let t=this._observers[e];return!t&&n&&(t=[],this._observers[e]=t),t}static _indexOfListener(e,n,t){return t=t||void 0,e.findIndex(o=>o.callback===n&&o.thisArg===t)}}c.propertyChangeEvent="propertyChange";function I(){return org.nativescript.Process.getUpTime()}function R(i,...e){global.__nslog&&global.__nslog("CONSOLE LOG: "+i),console.log(i,...e)}const _={},h=global.__time||Date.now;function $(i){let e=_[i];e?(e.currentStart=h(),e.runCount++):(e={totalTime:0,count:0,currentStart:h(),runCount:1},_[i]=e)}function W(i){const e=_[i];if(!e)throw new Error(`No timer started: ${i}`);if(e.runCount)e.runCount--,e.runCount?e.count++:(e.lastTime=h()-e.currentStart,e.totalTime+=e.lastTime,e.count++,e.currentStart=0);else throw new Error(`Timer ${i} paused more times than started.`);return e}function D(i,e,n=1){return function(){$(e);try{return i.apply(this,arguments)}finally{W(e)}}}function N(i,e,n=1){return n===1?function(){const t=h();try{return i.apply(this,arguments)}finally{const o=h();console.log(`Timeline: Modules: ${e} ${this}  (${t}ms. - ${o}ms.)`)}}:function(){const t=h();try{return i.apply(this,arguments)}finally{const o=h();console.log(`Timeline: Modules: ${e}  (${t}ms. - ${o}ms.)`)}}}var g;(function(i){i[i.none=0]="none",i[i.lifecycle=1]="lifecycle",i[i.timeline=2]="timeline"})(g||(g={}));let P=g.none,f;function T(i="counters"){f=i&&{counters:D,timeline:N}[i],P={lifecycle:g.lifecycle,timeline:g.timeline}[i]||g.none}try{const i=require("~/package.json");i&&i.profiling&&T(i.profiling)}catch(i){try{console.log("Profiling startup failed to figure out defaults from package.json, error: "+i)}catch{}}function C(i,e){return f(i,e||i.name)}const x=(i,e,n)=>{n===void 0&&(n=Object.getOwnPropertyDescriptor(i,e));const t=n.value;let o="";i&&i.constructor&&i.constructor.name&&(o=i.constructor.name+".");const r=o+(e==null?void 0:e.toString());return n.value=f(t,r,1),n},F=(i,e,n)=>{n===void 0&&(n=Object.getOwnPropertyDescriptor(i,e));const t=n.value;let o="";i&&i.name&&(o=i.name+".");const r=o+(e==null?void 0:e.toString());return n.value=f(t,r,0),n};function G(i){return(e,n,t)=>{t===void 0&&(t=Object.getOwnPropertyDescriptor(e,n));const o=t.value;return t.value=f(o,i),t}}const j=()=>{};function Q(i,e,n,t){return typeof i=="object"&&(typeof e=="string"||typeof e=="symbol")?f?x(i,e,n):void 0:typeof i=="function"&&(typeof e=="string"||typeof e=="symbol")?f?F(i,e,n):void 0:typeof i=="string"&&typeof e=="function"?f?C(e,i):e:typeof i=="function"?f?C(i):i:typeof i=="string"?f?G(i):j:f?x:j}function U(){return P}function V(i,e,n){R(`Timeline: Modules: ${i}  (${e}ms. - ${n}ms.)`)}const w=require("tslib");function H(i,e){Object.defineProperty(global,e,{get:function(){const t=global.loadModule(i)[e];return Object.defineProperty(global,e,{value:t,configurable:!0,writable:!0}),t},configurable:!0})}class z{constructor(){this.launched=!1,this._appInstanceReady=!1,this.events=new c,this._setLaunched=this._setLaunchedFn.bind(this),this.events.on("launch",this._setLaunched),U()>0&&this.events.on("displayed",()=>{const e=I(),n=h(),t=n-e;V(`Displayed in ${e.toFixed(2)}ms`,t,n)})}get appInstanceReady(){return this._appInstanceReady}set appInstanceReady(e){if(this._appInstanceReady=e,this.appEventWiring&&this.appEventWiring.length){for(const n of this.appEventWiring)n();this.appEventWiring=null}}addEventWiring(e){this._appInstanceReady?e():(this.appEventWiring||(this.appEventWiring=[]),this.appEventWiring.push(e))}_setLaunchedFn(){this.launched=!0,this.events.off("launch",this._setLaunched),this._setLaunched=null}}function d(i,e){if(global.__snapshot){const n=global.loadModule(i);e.forEach(t=>global[t]=n[t])}else e.forEach(n=>H(i,n))}function Z(){if(!global.NativeScriptHasInitGlobal){global.NativeScriptHasInitGlobal=!0,global.NativeScriptGlobals=new z,global.__extends||(global.__extends=function(t,o){for(const s in o)o.hasOwnProperty(s)&&(t[s]=o[s]);function r(){this.constructor=t}t.prototype=o===null?Object.create(o):(r.prototype=o.prototype,new r)});for(const t of Object.getOwnPropertyNames(w))typeof w[t]=="function"&&(t in global||(global[t]=w[t]));const i=new Map,e=new Set,n={".js":".js",".ts":".js",".kt":".js",".css":".css",".scss":".css",".less":".css",".sass":".css",".xml":".xml"};global.moduleResolvers=[global.require],global.registerModule=function(t,o){i.set(t,{loader:o,moduleId:t})},global._unregisterModule=function(o){i.delete(o)},global._isModuleLoadedForUI=function(o){return e.has(o)},global.registerWebpackModules=function(o,r={}){o.keys().forEach(s=>{const u=s.lastIndexOf("."),b=s.substr(0,u),m=s.substr(u),M=r[m]||n[m]||m,L=m!==M,a=b+M,v=E=>{i.set(E,{moduleId:s,loader:()=>o(s)})};a.startsWith("./")&&a.endsWith(".js")?[a.substr(2,a.length-5),a.substr(0,a.length-3),a.substr(2)].forEach(y=>{(L||!global.moduleExists(y))&&v(y)}):a.startsWith("./")&&[a.substr(2)].forEach(y=>{global.moduleExists(y)||v(y)}),(L||!global.moduleExists(a))&&v(a)})},global.moduleExists=function(o){return i.has(o)},global.loadModule=function(o,r=!1){const s=i.get(o);if(s){r&&e.add(s.moduleId);const u=s.loader(o);return u.enableAutoAccept&&u.enableAutoAccept(),u}for(const u of global.moduleResolvers){const b=u(o);if(b)return i.set(o,{moduleId:o,loader:()=>b}),b}},global.getRegisteredModules=function(){return Array.from(i.keys())},global.moduleMerge=function(t,o){for(const r in t)o[r]=t[r]},global.zonedCallback=function(t){return global.zone?global.zone.bind(t):global.Zone?global.Zone.current.wrap(t):t},global.System={import(t){return new Promise((o,r)=>{try{o(global.require(t))}catch(s){r(s)}})}},global.registerModule("timer",()=>require("../timer")),d("timer",["setTimeout","clearTimeout","setInterval","clearInterval"]),global.registerModule("animation",()=>require("../animation-frame")),d("animation",["requestAnimationFrame","cancelAnimationFrame"]),global.registerModule("media-query-list",()=>require("../media-query-list")),d("media-query-list",["matchMedia","MediaQueryList"]),global.registerModule("ui-dialogs",()=>require("../ui/dialogs")),d("ui-dialogs",["alert","confirm","prompt","login","action"]),global.registerModule("text",()=>require("../text")),d("text",["TextDecoder","TextEncoder"]),global.registerModule("xhr",()=>require("../xhr")),d("xhr",["XMLHttpRequest","FormData","Blob","File","FileReader"]),global.registerModule("fetch",()=>require("../fetch")),d("fetch",["fetch","Headers","Request","Response"]),global.registerModule("wgc",()=>require("../wgc")),d("wgc",["atob","btoa"]),global.registerModule("crypto",()=>require("../wgc/crypto")),d("crypto",["Crypto"]),global.registerModule("subtle",()=>require("../wgc/crypto/SubtleCrypto")),d("subtle-crypto",["Subtle"]),global.crypto=new global.Crypto,global.Deprecated=function(t,o,r){if(r){const s=r.value;return r.value=function(...u){return console.log(`${o.toString()} is deprecated`),s.apply(this,u)},r}else return console.log(`${t&&t.name||t} is deprecated`),t},global.Experimental=function(t,o,r){if(r){const s=r.value;return r.value=function(...u){return console.log(`${o.toString()} is experimental`),s.apply(this,u)},r}else return console.log(`${t&&t.name||t} is experimental`),t}}}function B(){return typeof jest<"u"}!global.NativeScriptHasInitGlobal&&!B()&&Z();require("@nativescript/core/application");export{c as O,p as W,Q as p};
